<section class="auth-screen" [@authPageAnimation]>
  <app-auth-hero-panel />

  <div class="auth-pane">
    <article class="auth-card" [@staggerTextAnimation]>
      <p class="eyebrow reveal-item">{{ 'AUTH.LOGIN.EYEBROW' | translate }}</p>
      <h1 class="reveal-item">{{ 'AUTH.LOGIN.TITLE' | translate }}</h1>

      <form class="auth-form" [formGroup]="loginForm" (ngSubmit)="signIn()" novalidate>
        <div class="field-group reveal-item">
          <label
            class="field-shell"
            [class.focused]="focusedField() === 'email'"
            [class.invalid]="hasError('email')"
            [class.has-value]="!!loginForm.controls.email.value"
          >
            <input
              type="email"
              formControlName="email"
              autocomplete="email"
              placeholder=" "
              (focus)="setFocusedField('email')"
              (blur)="setFocusedField(null)"
            />
            <span class="floating-label">{{ 'AUTH.LOGIN.FIELDS.EMAIL' | translate }}</span>
          </label>
          <p class="field-error" *ngIf="hasError('email')" [@fieldErrorAnimation]>
            {{ errorText('email') | translate }}
          </p>
        </div>

        <div class="field-group reveal-item">
          <label
            class="field-shell"
            [class.focused]="focusedField() === 'password'"
            [class.invalid]="hasError('password')"
            [class.has-value]="!!loginForm.controls.password.value"
          >
            <input
              type="password"
              formControlName="password"
              autocomplete="current-password"
              placeholder=" "
              (focus)="setFocusedField('password')"
              (blur)="setFocusedField(null)"
            />
            <span class="floating-label">{{ 'AUTH.LOGIN.FIELDS.PASSWORD' | translate }}</span>
          </label>
          <p class="field-error" *ngIf="hasError('password')" [@fieldErrorAnimation]>
            {{ errorText('password') | translate }}
          </p>
        </div>

        <label class="remember-row reveal-item">
          <input type="checkbox" formControlName="rememberMe" />
          <span>{{ 'AUTH.LOGIN.KEEP_SIGNED_IN' | translate }}</span>
        </label>

        <p class="form-error" *ngIf="errorMessage()" [@fieldErrorAnimation]>{{ errorMessage() | translate }}</p>

        <button type="submit" class="submit-btn reveal-item" [disabled]="isSubmitting()">
          {{ (isSubmitting() ? 'AUTH.LOGIN.SUBMITTING' : 'AUTH.LOGIN.SUBMIT') | translate }}
        </button>
      </form>

      <div class="auth-footer reveal-item">
        <button type="button" class="ghost-btn" (click)="openDemoModal()">
          {{ 'AUTH.LOGIN.DEMO_BUTTON' | translate }}
        </button>
        <p>
          {{ 'AUTH.LOGIN.NEED_ACCOUNT' | translate }}
          <a routerLink="/auth/register">{{ 'AUTH.LOGIN.CREATE_ONE' | translate }}</a>
        </p>
      </div>
    </article>
  </div>
</section>

<app-auth-modal
  *ngIf="showDemoModal()"
  [title]="'AUTH.LOGIN.DEMO_MODAL.TITLE' | translate"
  [description]="'AUTH.LOGIN.DEMO_MODAL.DESCRIPTION' | translate"
  [primaryActionLabel]="'AUTH.LOGIN.DEMO_MODAL.PRIMARY_ACTION' | translate"
  (closed)="closeDemoModal()"
  (primaryAction)="fillDemoCredentials()"
>
  <ul class="demo-list">
    <li>
      <span>{{ 'AUTH.LOGIN.DEMO_MODAL.EMAIL' | translate }}</span>
      <strong>team&#64;enterprise.io</strong>
    </li>
    <li>
      <span>{{ 'AUTH.LOGIN.DEMO_MODAL.PASSWORD' | translate }}</span>
      <strong>workspace</strong>
    </li>
  </ul>
</app-auth-modal>
